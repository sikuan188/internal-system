{% extends "admin/change_list.html" %}
{% load i18n admin_urls static admin_list %}

{% block object-tools-items %}
{{ block.super }}

<!-- 批量導入CSV按鈕 -->
<li>
    <a href="{% url 'admin:staffprofile_import_csv' %}" class="addlink">
        批量導入員工資料
    </a>
</li>

<!-- 批量上傳照片按鈕 -->
<li>
    <a href="{% url 'admin:staffprofile_batch_photo_upload' %}" class="addlink">
        批量上傳員工照片
    </a>
</li>

<!-- 下載CSV模板按鈕 -->
<li>
    <a href="/static/import_data_format_sample_utf8_bom.csv" class="addlink" download>
        下載CSV模板
    </a>
</li>

<!-- 導出CSV按鈕 -->
<li>
    <a href="{% url 'admin:staffprofile_export_csv' %}" class="addlink">
        導出員工資料
    </a>
</li>

<!-- 導出員工相片按鈕 -->
<li>
    <a href="{% url 'admin:staffprofile_export_photos' %}" class="addlink">
        導出員工相片
    </a>
</li>
{% endblock %}

{% block extrahead %}
{{ block.super }}
<style>
.addlink {
    margin-left: 10px;
    white-space: nowrap;
}
.object-tools li {
    margin-right: 5px;
}

/* 響應式表格設計 */
#changelist {
    overflow-x: auto;
}

#result_list {
    min-width: 100%;
    table-layout: auto;
}

/* 調整各欄位寬度 */
#result_list th:nth-child(1), /* 選擇框 */
#result_list td:nth-child(1) {
    width: 30px;
    min-width: 30px;
}

#result_list th:nth-child(2), /* 員工編號 */
#result_list td:nth-child(2) {
    width: 100px;
    min-width: 100px;
}

#result_list th:nth-child(3), /* 姓名 */
#result_list td:nth-child(3) {
    width: 120px;
    min-width: 120px;
}

#result_list th:nth-child(4), /* 部門 */
#result_list td:nth-child(4) {
    width: 100px;
    min-width: 100px;
}

#result_list th:nth-child(5), /* 職位 */
#result_list td:nth-child(5) {
    width: 100px;
    min-width: 100px;
}

#result_list th:nth-child(6), /* 電話 */
#result_list td:nth-child(6) {
    width: 120px;
    min-width: 120px;
}

#result_list th:nth-child(7), /* 電郵 */
#result_list td:nth-child(7) {
    width: 180px;
    min-width: 180px;
}

#result_list th:nth-child(8), /* 狀態 */
#result_list td:nth-child(8) {
    width: 80px;
    min-width: 80px;
}

#result_list th:nth-child(9), /* 操作 */
#result_list td:nth-child(9) {
    width: 60px;
    min-width: 60px;
}

/* 響應式設計：在小屏幕上 */
@media (max-width: 1200px) {
    #changelist {
        overflow-x: scroll;
    }
    
    #result_list {
        min-width: 1000px;
    }
}

/* 文字截斷處理 */
#result_list td {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 8px 6px;
}

/* 重要欄位不截斷 */
#result_list td:nth-child(2), /* 員工編號 */
#result_list td:nth-child(3) { /* 姓名 */
    white-space: nowrap;
}

/* 電郵欄位允許換行 */
#result_list td:nth-child(7) {
    white-space: normal;
    word-break: break-word;
    max-width: 180px;
}
</style>
{% endblock %}
